<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="pt"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ScheduleView.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;ControlChefWeb&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">br.com.controlchefweb.bean</a> &gt; <span class="el_source">ScheduleView.java</span></div><h1>ScheduleView.java</h1><pre class="source lang-java linenums">package br.com.controlchefweb.bean;
 
import java.io.Serializable;
import java.util.Calendar;
import java.util.Date;
import javax.annotation.PostConstruct;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
 
import org.primefaces.event.ScheduleEntryMoveEvent;
import org.primefaces.event.ScheduleEntryResizeEvent;
import org.primefaces.event.SelectEvent;
import org.primefaces.model.DefaultScheduleEvent;
import org.primefaces.model.DefaultScheduleModel;
import org.primefaces.model.LazyScheduleModel;
import org.primefaces.model.ScheduleEvent;
import org.primefaces.model.ScheduleModel;
 
@ManagedBean
@ViewScoped
<span class="fc" id="L24">public class ScheduleView implements Serializable {</span>
 
    private ScheduleModel eventModel;
     
    private ScheduleModel lazyEventModel;
 
<span class="fc" id="L30">    private ScheduleEvent event = new DefaultScheduleEvent();</span>
 
    @PostConstruct
    public void init() {
<span class="fc" id="L34">        eventModel = new DefaultScheduleModel();</span>
<span class="fc" id="L35">        eventModel.addEvent(new DefaultScheduleEvent(&quot;Champions League Match&quot;, previousDay8Pm(), previousDay11Pm()));</span>
<span class="fc" id="L36">        eventModel.addEvent(new DefaultScheduleEvent(&quot;Birthday Party&quot;, today1Pm(), today6Pm()));</span>
<span class="fc" id="L37">        eventModel.addEvent(new DefaultScheduleEvent(&quot;Breakfast at Tiffanys&quot;, nextDay9Am(), nextDay11Am()));</span>
<span class="fc" id="L38">        eventModel.addEvent(new DefaultScheduleEvent(&quot;Plant the new garden stuff&quot;, theDayAfter3Pm(), fourDaysLater3pm()));</span>
         
<span class="fc" id="L40">        lazyEventModel = new LazyScheduleModel() {</span>
             
            @Override
            public void loadEvents(Date start, Date end) {
<span class="nc" id="L44">                Date random = getRandomDate(start);</span>
<span class="nc" id="L45">                addEvent(new DefaultScheduleEvent(&quot;Lazy Event 1&quot;, random, random));</span>
                 
<span class="nc" id="L47">                random = getRandomDate(start);</span>
<span class="nc" id="L48">                addEvent(new DefaultScheduleEvent(&quot;Lazy Event 2&quot;, random, random));</span>
<span class="nc" id="L49">            }   </span>
        };
<span class="fc" id="L51">    }</span>
     
    public Date getRandomDate(Date base) {
<span class="fc" id="L54">        Calendar date = Calendar.getInstance();</span>
<span class="nc" id="L55">        date.setTime(base);</span>
<span class="nc" id="L56">        date.add(Calendar.DATE, ((int) (Math.random()*30)) + 1);    //set random day of month</span>
         
<span class="nc" id="L58">        return date.getTime();</span>
    }
     
    public Date getInitialDate() {
<span class="fc" id="L62">        Calendar calendar = Calendar.getInstance();</span>
<span class="fc" id="L63">        calendar.set(calendar.get(Calendar.YEAR), Calendar.FEBRUARY, calendar.get(Calendar.DATE), 0, 0, 0);</span>
         
<span class="fc" id="L65">        return calendar.getTime();</span>
    }
     
    public ScheduleModel getEventModel() {
<span class="fc" id="L69">        return eventModel;</span>
    }
     
    public ScheduleModel getLazyEventModel() {
<span class="fc" id="L73">        return lazyEventModel;</span>
    }
 
    private Calendar today() {
<span class="fc" id="L77">        Calendar calendar = Calendar.getInstance();</span>
<span class="fc" id="L78">        calendar.set(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DATE), 0, 0, 0);</span>
 
<span class="fc" id="L80">        return calendar;</span>
    }
     
    private Date previousDay8Pm() {
<span class="fc" id="L84">        Calendar t = (Calendar) today().clone();</span>
<span class="fc" id="L85">        t.set(Calendar.AM_PM, Calendar.PM);</span>
<span class="fc" id="L86">        t.set(Calendar.DATE, t.get(Calendar.DATE) - 1);</span>
<span class="fc" id="L87">        t.set(Calendar.HOUR, 8);</span>
         
<span class="fc" id="L89">        return t.getTime();</span>
    }
     
    private Date previousDay11Pm() {
<span class="fc" id="L93">        Calendar t = (Calendar) today().clone();</span>
<span class="fc" id="L94">        t.set(Calendar.AM_PM, Calendar.PM);</span>
<span class="fc" id="L95">        t.set(Calendar.DATE, t.get(Calendar.DATE) - 1);</span>
<span class="fc" id="L96">        t.set(Calendar.HOUR, 11);</span>
         
<span class="fc" id="L98">        return t.getTime();</span>
    }
     
    private Date today1Pm() {
<span class="fc" id="L102">        Calendar t = (Calendar) today().clone();</span>
<span class="fc" id="L103">        t.set(Calendar.AM_PM, Calendar.PM);</span>
<span class="fc" id="L104">        t.set(Calendar.HOUR, 1);</span>
         
<span class="fc" id="L106">        return t.getTime();</span>
    }
     
    private Date theDayAfter3Pm() {
<span class="fc" id="L110">        Calendar t = (Calendar) today().clone();</span>
<span class="fc" id="L111">        t.set(Calendar.DATE, t.get(Calendar.DATE) + 2);     </span>
<span class="fc" id="L112">        t.set(Calendar.AM_PM, Calendar.PM);</span>
<span class="fc" id="L113">        t.set(Calendar.HOUR, 3);</span>
         
<span class="fc" id="L115">        return t.getTime();</span>
    }
 
    private Date today6Pm() {
<span class="fc" id="L119">        Calendar t = (Calendar) today().clone(); </span>
<span class="fc" id="L120">        t.set(Calendar.AM_PM, Calendar.PM);</span>
<span class="fc" id="L121">        t.set(Calendar.HOUR, 6);</span>
         
<span class="fc" id="L123">        return t.getTime();</span>
    }
     
    private Date nextDay9Am() {
<span class="fc" id="L127">        Calendar t = (Calendar) today().clone();</span>
<span class="fc" id="L128">        t.set(Calendar.AM_PM, Calendar.AM);</span>
<span class="fc" id="L129">        t.set(Calendar.DATE, t.get(Calendar.DATE) + 1);</span>
<span class="fc" id="L130">        t.set(Calendar.HOUR, 9);</span>
         
<span class="fc" id="L132">        return t.getTime();</span>
    }
     
    private Date nextDay11Am() {
<span class="fc" id="L136">        Calendar t = (Calendar) today().clone();</span>
<span class="fc" id="L137">        t.set(Calendar.AM_PM, Calendar.AM);</span>
<span class="fc" id="L138">        t.set(Calendar.DATE, t.get(Calendar.DATE) + 1);</span>
<span class="fc" id="L139">        t.set(Calendar.HOUR, 11);</span>
         
<span class="fc" id="L141">        return t.getTime();</span>
    }
     
    private Date fourDaysLater3pm() {
<span class="fc" id="L145">        Calendar t = (Calendar) today().clone(); </span>
<span class="fc" id="L146">        t.set(Calendar.AM_PM, Calendar.PM);</span>
<span class="fc" id="L147">        t.set(Calendar.DATE, t.get(Calendar.DATE) + 4);</span>
<span class="fc" id="L148">        t.set(Calendar.HOUR, 3);</span>
         
<span class="fc" id="L150">        return t.getTime();</span>
    }
     
    public ScheduleEvent getEvent() {
<span class="fc" id="L154">        return event;</span>
    }
 
    public void setEvent(ScheduleEvent event) {
<span class="fc" id="L158">        this.event = event;</span>
<span class="fc" id="L159">    }</span>
     
    public void addEvent(ActionEvent actionEvent) {
<span class="pc bpc" id="L162" title="1 of 2 branches missed.">        if(event.getId() == null)</span>
<span class="nc" id="L163">            eventModel.addEvent(event);</span>
        else
<span class="nc" id="L165">            eventModel.updateEvent(event);</span>
         
<span class="nc" id="L167">        event = new DefaultScheduleEvent();</span>
<span class="nc" id="L168">    }</span>
     
    public void onEventSelect(SelectEvent selectEvent) {
<span class="nc" id="L171">        event = (ScheduleEvent) selectEvent.getObject();</span>
<span class="nc" id="L172">    }</span>
     
    public void onDateSelect(SelectEvent selectEvent) {
<span class="nc" id="L175">        event = new DefaultScheduleEvent(&quot;&quot;, (Date) selectEvent.getObject(), (Date) selectEvent.getObject());</span>
<span class="nc" id="L176">    }</span>
     
    public void onEventMove(ScheduleEntryMoveEvent event) {
<span class="nc" id="L179">        FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, &quot;Event moved&quot;, &quot;Day delta:&quot; + event.getDayDelta() + &quot;, Minute delta:&quot; + event.getMinuteDelta());</span>
         
<span class="nc" id="L181">        addMessage(message);</span>
<span class="nc" id="L182">    }</span>
     
    public void onEventResize(ScheduleEntryResizeEvent event) {
<span class="nc" id="L185">        FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, &quot;Event resized&quot;, &quot;Day delta:&quot; + event.getDayDelta() + &quot;, Minute delta:&quot; + event.getMinuteDelta());</span>
         
<span class="nc" id="L187">        addMessage(message);</span>
<span class="nc" id="L188">    }</span>
     
    private void addMessage(FacesMessage message) {
<span class="nc" id="L191">        FacesContext.getCurrentInstance().addMessage(null, message);</span>
<span class="nc" id="L192">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>